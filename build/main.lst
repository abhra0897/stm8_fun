                                      1 ;--------------------------------------------------------
                                      2 ; File Created by SDCC : free open source ANSI-C Compiler
                                      3 ; Version 4.0.0 #11528 (Linux)
                                      4 ;--------------------------------------------------------
                                      5 	.module main
                                      6 	.optsdcc -mstm8
                                      7 	
                                      8 ;--------------------------------------------------------
                                      9 ; Public variables in this module
                                     10 ;--------------------------------------------------------
                                     11 	.globl _main
                                     12 	.globl _flash_write_enable
                                     13 	.globl _flash_erase_chip
                                     14 	.globl _flash_busy_wait
                                     15 	.globl _flash_read_from_addr
                                     16 	.globl _flash_write_to_addr
                                     17 	.globl _spi_cs_idle
                                     18 	.globl _spi_cs_active
                                     19 	.globl _spi_config
                                     20 	.globl _strlen
                                     21 	.globl _uart_init
                                     22 	.globl _uart_write
                                     23 	.globl _uart_write_8bits
                                     24 	.globl _int_to_hex_str
                                     25 ;--------------------------------------------------------
                                     26 ; ram data
                                     27 ;--------------------------------------------------------
                                     28 	.area DATA
                                     29 ;--------------------------------------------------------
                                     30 ; ram data
                                     31 ;--------------------------------------------------------
                                     32 	.area INITIALIZED
                                     33 ;--------------------------------------------------------
                                     34 ; Stack segment in internal ram 
                                     35 ;--------------------------------------------------------
                                     36 	.area	SSEG
      000000                         37 __start__stack:
      000000                         38 	.ds	1
                                     39 
                                     40 ;--------------------------------------------------------
                                     41 ; absolute external ram data
                                     42 ;--------------------------------------------------------
                                     43 	.area DABS (ABS)
                                     44 
                                     45 ; default segment ordering for linker
                                     46 	.area HOME
                                     47 	.area GSINIT
                                     48 	.area GSFINAL
                                     49 	.area CONST
                                     50 	.area INITIALIZER
                                     51 	.area CODE
                                     52 
                                     53 ;--------------------------------------------------------
                                     54 ; interrupt vector 
                                     55 ;--------------------------------------------------------
                                     56 	.area HOME
      000000                         57 __interrupt_vect:
      000000 82v00u00u00             58 	int s_GSINIT ; reset
                                     59 ;--------------------------------------------------------
                                     60 ; global & static initialisations
                                     61 ;--------------------------------------------------------
                                     62 	.area HOME
                                     63 	.area GSINIT
                                     64 	.area GSFINAL
                                     65 	.area GSINIT
      000000                         66 __sdcc_gs_init_startup:
      000000                         67 __sdcc_init_data:
                                     68 ; stm8_genXINIT() start
      000000 AEr00r00         [ 2]   69 	ldw x, #l_DATA
      000003 27 07            [ 1]   70 	jreq	00002$
      000005                         71 00001$:
      000005 72 4FuFFuFF      [ 1]   72 	clr (s_DATA - 1, x)
      000009 5A               [ 2]   73 	decw x
      00000A 26 F9            [ 1]   74 	jrne	00001$
      00000C                         75 00002$:
      00000C AEr00r00         [ 2]   76 	ldw	x, #l_INITIALIZER
      00000F 27 09            [ 1]   77 	jreq	00004$
      000011                         78 00003$:
      000011 D6uFFuFF         [ 1]   79 	ld	a, (s_INITIALIZER - 1, x)
      000014 D7uFFuFF         [ 1]   80 	ld	(s_INITIALIZED - 1, x), a
      000017 5A               [ 2]   81 	decw	x
      000018 26 F7            [ 1]   82 	jrne	00003$
      00001A                         83 00004$:
                                     84 ; stm8_genXINIT() end
                                     85 	.area GSFINAL
      000000 CCr00r04         [ 2]   86 	jp	__sdcc_program_startup
                                     87 ;--------------------------------------------------------
                                     88 ; Home
                                     89 ;--------------------------------------------------------
                                     90 	.area HOME
                                     91 	.area HOME
      000004                         92 __sdcc_program_startup:
      000004 CCr00r00         [ 2]   93 	jp	_main
                                     94 ;	return from main will return to caller
                                     95 ;--------------------------------------------------------
                                     96 ; code
                                     97 ;--------------------------------------------------------
                                     98 	.area CODE
                                     99 ;	src/main.c: 15: void main(void)
                                    100 ;	-----------------------------------------
                                    101 ;	 function main
                                    102 ;	-----------------------------------------
      000000                        103 _main:
      000000 52 CB            [ 2]  104 	sub	sp, #203
                                    105 ;	src/main.c: 18: CLK_CKDIVR = 0;
      000002 35 00 50 C6      [ 1]  106 	mov	0x50c6+0, #0x00
                                    107 ;	src/main.c: 19: uart_init();
      000006 CDr02rE0         [ 4]  108 	call	_uart_init
                                    109 ;	src/main.c: 21: uint8_t buff[100] = {0};
      000009 0F 01            [ 1]  110 	clr	(0x01, sp)
      00000B 96               [ 1]  111 	ldw	x, sp
      00000C 6F 02            [ 1]  112 	clr	(2, x)
      00000E 96               [ 1]  113 	ldw	x, sp
      00000F 6F 03            [ 1]  114 	clr	(3, x)
      000011 96               [ 1]  115 	ldw	x, sp
      000012 6F 04            [ 1]  116 	clr	(4, x)
      000014 96               [ 1]  117 	ldw	x, sp
      000015 6F 05            [ 1]  118 	clr	(5, x)
      000017 96               [ 1]  119 	ldw	x, sp
      000018 6F 06            [ 1]  120 	clr	(6, x)
      00001A 96               [ 1]  121 	ldw	x, sp
      00001B 6F 07            [ 1]  122 	clr	(7, x)
      00001D 96               [ 1]  123 	ldw	x, sp
      00001E 6F 08            [ 1]  124 	clr	(8, x)
      000020 96               [ 1]  125 	ldw	x, sp
      000021 6F 09            [ 1]  126 	clr	(9, x)
      000023 96               [ 1]  127 	ldw	x, sp
      000024 6F 0A            [ 1]  128 	clr	(10, x)
      000026 96               [ 1]  129 	ldw	x, sp
      000027 6F 0B            [ 1]  130 	clr	(11, x)
      000029 96               [ 1]  131 	ldw	x, sp
      00002A 6F 0C            [ 1]  132 	clr	(12, x)
      00002C 96               [ 1]  133 	ldw	x, sp
      00002D 6F 0D            [ 1]  134 	clr	(13, x)
      00002F 96               [ 1]  135 	ldw	x, sp
      000030 6F 0E            [ 1]  136 	clr	(14, x)
      000032 96               [ 1]  137 	ldw	x, sp
      000033 6F 0F            [ 1]  138 	clr	(15, x)
      000035 96               [ 1]  139 	ldw	x, sp
      000036 6F 10            [ 1]  140 	clr	(16, x)
      000038 96               [ 1]  141 	ldw	x, sp
      000039 6F 11            [ 1]  142 	clr	(17, x)
      00003B 96               [ 1]  143 	ldw	x, sp
      00003C 6F 12            [ 1]  144 	clr	(18, x)
      00003E 96               [ 1]  145 	ldw	x, sp
      00003F 6F 13            [ 1]  146 	clr	(19, x)
      000041 96               [ 1]  147 	ldw	x, sp
      000042 6F 14            [ 1]  148 	clr	(20, x)
      000044 96               [ 1]  149 	ldw	x, sp
      000045 6F 15            [ 1]  150 	clr	(21, x)
      000047 96               [ 1]  151 	ldw	x, sp
      000048 6F 16            [ 1]  152 	clr	(22, x)
      00004A 96               [ 1]  153 	ldw	x, sp
      00004B 6F 17            [ 1]  154 	clr	(23, x)
      00004D 96               [ 1]  155 	ldw	x, sp
      00004E 6F 18            [ 1]  156 	clr	(24, x)
      000050 96               [ 1]  157 	ldw	x, sp
      000051 6F 19            [ 1]  158 	clr	(25, x)
      000053 96               [ 1]  159 	ldw	x, sp
      000054 6F 1A            [ 1]  160 	clr	(26, x)
      000056 96               [ 1]  161 	ldw	x, sp
      000057 6F 1B            [ 1]  162 	clr	(27, x)
      000059 96               [ 1]  163 	ldw	x, sp
      00005A 6F 1C            [ 1]  164 	clr	(28, x)
      00005C 96               [ 1]  165 	ldw	x, sp
      00005D 6F 1D            [ 1]  166 	clr	(29, x)
      00005F 96               [ 1]  167 	ldw	x, sp
      000060 6F 1E            [ 1]  168 	clr	(30, x)
      000062 96               [ 1]  169 	ldw	x, sp
      000063 6F 1F            [ 1]  170 	clr	(31, x)
      000065 96               [ 1]  171 	ldw	x, sp
      000066 6F 20            [ 1]  172 	clr	(32, x)
      000068 96               [ 1]  173 	ldw	x, sp
      000069 6F 21            [ 1]  174 	clr	(33, x)
      00006B 96               [ 1]  175 	ldw	x, sp
      00006C 6F 22            [ 1]  176 	clr	(34, x)
      00006E 96               [ 1]  177 	ldw	x, sp
      00006F 6F 23            [ 1]  178 	clr	(35, x)
      000071 96               [ 1]  179 	ldw	x, sp
      000072 6F 24            [ 1]  180 	clr	(36, x)
      000074 96               [ 1]  181 	ldw	x, sp
      000075 6F 25            [ 1]  182 	clr	(37, x)
      000077 96               [ 1]  183 	ldw	x, sp
      000078 6F 26            [ 1]  184 	clr	(38, x)
      00007A 96               [ 1]  185 	ldw	x, sp
      00007B 6F 27            [ 1]  186 	clr	(39, x)
      00007D 96               [ 1]  187 	ldw	x, sp
      00007E 6F 28            [ 1]  188 	clr	(40, x)
      000080 96               [ 1]  189 	ldw	x, sp
      000081 6F 29            [ 1]  190 	clr	(41, x)
      000083 96               [ 1]  191 	ldw	x, sp
      000084 6F 2A            [ 1]  192 	clr	(42, x)
      000086 96               [ 1]  193 	ldw	x, sp
      000087 6F 2B            [ 1]  194 	clr	(43, x)
      000089 96               [ 1]  195 	ldw	x, sp
      00008A 6F 2C            [ 1]  196 	clr	(44, x)
      00008C 96               [ 1]  197 	ldw	x, sp
      00008D 6F 2D            [ 1]  198 	clr	(45, x)
      00008F 96               [ 1]  199 	ldw	x, sp
      000090 6F 2E            [ 1]  200 	clr	(46, x)
      000092 96               [ 1]  201 	ldw	x, sp
      000093 6F 2F            [ 1]  202 	clr	(47, x)
      000095 96               [ 1]  203 	ldw	x, sp
      000096 6F 30            [ 1]  204 	clr	(48, x)
      000098 96               [ 1]  205 	ldw	x, sp
      000099 6F 31            [ 1]  206 	clr	(49, x)
      00009B 96               [ 1]  207 	ldw	x, sp
      00009C 6F 32            [ 1]  208 	clr	(50, x)
      00009E 96               [ 1]  209 	ldw	x, sp
      00009F 6F 33            [ 1]  210 	clr	(51, x)
      0000A1 96               [ 1]  211 	ldw	x, sp
      0000A2 6F 34            [ 1]  212 	clr	(52, x)
      0000A4 96               [ 1]  213 	ldw	x, sp
      0000A5 6F 35            [ 1]  214 	clr	(53, x)
      0000A7 96               [ 1]  215 	ldw	x, sp
      0000A8 6F 36            [ 1]  216 	clr	(54, x)
      0000AA 96               [ 1]  217 	ldw	x, sp
      0000AB 6F 37            [ 1]  218 	clr	(55, x)
      0000AD 96               [ 1]  219 	ldw	x, sp
      0000AE 6F 38            [ 1]  220 	clr	(56, x)
      0000B0 96               [ 1]  221 	ldw	x, sp
      0000B1 6F 39            [ 1]  222 	clr	(57, x)
      0000B3 96               [ 1]  223 	ldw	x, sp
      0000B4 6F 3A            [ 1]  224 	clr	(58, x)
      0000B6 96               [ 1]  225 	ldw	x, sp
      0000B7 6F 3B            [ 1]  226 	clr	(59, x)
      0000B9 96               [ 1]  227 	ldw	x, sp
      0000BA 6F 3C            [ 1]  228 	clr	(60, x)
      0000BC 96               [ 1]  229 	ldw	x, sp
      0000BD 6F 3D            [ 1]  230 	clr	(61, x)
      0000BF 96               [ 1]  231 	ldw	x, sp
      0000C0 6F 3E            [ 1]  232 	clr	(62, x)
      0000C2 96               [ 1]  233 	ldw	x, sp
      0000C3 6F 3F            [ 1]  234 	clr	(63, x)
      0000C5 96               [ 1]  235 	ldw	x, sp
      0000C6 6F 40            [ 1]  236 	clr	(64, x)
      0000C8 96               [ 1]  237 	ldw	x, sp
      0000C9 6F 41            [ 1]  238 	clr	(65, x)
      0000CB 96               [ 1]  239 	ldw	x, sp
      0000CC 6F 42            [ 1]  240 	clr	(66, x)
      0000CE 96               [ 1]  241 	ldw	x, sp
      0000CF 6F 43            [ 1]  242 	clr	(67, x)
      0000D1 96               [ 1]  243 	ldw	x, sp
      0000D2 6F 44            [ 1]  244 	clr	(68, x)
      0000D4 96               [ 1]  245 	ldw	x, sp
      0000D5 6F 45            [ 1]  246 	clr	(69, x)
      0000D7 96               [ 1]  247 	ldw	x, sp
      0000D8 6F 46            [ 1]  248 	clr	(70, x)
      0000DA 96               [ 1]  249 	ldw	x, sp
      0000DB 6F 47            [ 1]  250 	clr	(71, x)
      0000DD 96               [ 1]  251 	ldw	x, sp
      0000DE 6F 48            [ 1]  252 	clr	(72, x)
      0000E0 96               [ 1]  253 	ldw	x, sp
      0000E1 6F 49            [ 1]  254 	clr	(73, x)
      0000E3 96               [ 1]  255 	ldw	x, sp
      0000E4 6F 4A            [ 1]  256 	clr	(74, x)
      0000E6 96               [ 1]  257 	ldw	x, sp
      0000E7 6F 4B            [ 1]  258 	clr	(75, x)
      0000E9 96               [ 1]  259 	ldw	x, sp
      0000EA 6F 4C            [ 1]  260 	clr	(76, x)
      0000EC 96               [ 1]  261 	ldw	x, sp
      0000ED 6F 4D            [ 1]  262 	clr	(77, x)
      0000EF 96               [ 1]  263 	ldw	x, sp
      0000F0 6F 4E            [ 1]  264 	clr	(78, x)
      0000F2 96               [ 1]  265 	ldw	x, sp
      0000F3 6F 4F            [ 1]  266 	clr	(79, x)
      0000F5 96               [ 1]  267 	ldw	x, sp
      0000F6 6F 50            [ 1]  268 	clr	(80, x)
      0000F8 96               [ 1]  269 	ldw	x, sp
      0000F9 6F 51            [ 1]  270 	clr	(81, x)
      0000FB 96               [ 1]  271 	ldw	x, sp
      0000FC 6F 52            [ 1]  272 	clr	(82, x)
      0000FE 96               [ 1]  273 	ldw	x, sp
      0000FF 6F 53            [ 1]  274 	clr	(83, x)
      000101 96               [ 1]  275 	ldw	x, sp
      000102 6F 54            [ 1]  276 	clr	(84, x)
      000104 96               [ 1]  277 	ldw	x, sp
      000105 6F 55            [ 1]  278 	clr	(85, x)
      000107 96               [ 1]  279 	ldw	x, sp
      000108 6F 56            [ 1]  280 	clr	(86, x)
      00010A 96               [ 1]  281 	ldw	x, sp
      00010B 6F 57            [ 1]  282 	clr	(87, x)
      00010D 96               [ 1]  283 	ldw	x, sp
      00010E 6F 58            [ 1]  284 	clr	(88, x)
      000110 96               [ 1]  285 	ldw	x, sp
      000111 6F 59            [ 1]  286 	clr	(89, x)
      000113 96               [ 1]  287 	ldw	x, sp
      000114 6F 5A            [ 1]  288 	clr	(90, x)
      000116 96               [ 1]  289 	ldw	x, sp
      000117 6F 5B            [ 1]  290 	clr	(91, x)
      000119 96               [ 1]  291 	ldw	x, sp
      00011A 6F 5C            [ 1]  292 	clr	(92, x)
      00011C 96               [ 1]  293 	ldw	x, sp
      00011D 6F 5D            [ 1]  294 	clr	(93, x)
      00011F 96               [ 1]  295 	ldw	x, sp
      000120 6F 5E            [ 1]  296 	clr	(94, x)
      000122 96               [ 1]  297 	ldw	x, sp
      000123 6F 5F            [ 1]  298 	clr	(95, x)
      000125 96               [ 1]  299 	ldw	x, sp
      000126 6F 60            [ 1]  300 	clr	(96, x)
      000128 96               [ 1]  301 	ldw	x, sp
      000129 6F 61            [ 1]  302 	clr	(97, x)
      00012B 96               [ 1]  303 	ldw	x, sp
      00012C 6F 62            [ 1]  304 	clr	(98, x)
      00012E 96               [ 1]  305 	ldw	x, sp
      00012F 6F 63            [ 1]  306 	clr	(99, x)
      000131 96               [ 1]  307 	ldw	x, sp
      000132 6F 64            [ 1]  308 	clr	(100, x)
                                    309 ;	src/main.c: 22: uint8_t buff2[100] = {0};
      000134 0F 65            [ 1]  310 	clr	(0x65, sp)
      000136 96               [ 1]  311 	ldw	x, sp
      000137 6F 66            [ 1]  312 	clr	(102, x)
      000139 96               [ 1]  313 	ldw	x, sp
      00013A 6F 67            [ 1]  314 	clr	(103, x)
      00013C 96               [ 1]  315 	ldw	x, sp
      00013D 6F 68            [ 1]  316 	clr	(104, x)
      00013F 96               [ 1]  317 	ldw	x, sp
      000140 6F 69            [ 1]  318 	clr	(105, x)
      000142 96               [ 1]  319 	ldw	x, sp
      000143 6F 6A            [ 1]  320 	clr	(106, x)
      000145 96               [ 1]  321 	ldw	x, sp
      000146 6F 6B            [ 1]  322 	clr	(107, x)
      000148 96               [ 1]  323 	ldw	x, sp
      000149 6F 6C            [ 1]  324 	clr	(108, x)
      00014B 96               [ 1]  325 	ldw	x, sp
      00014C 6F 6D            [ 1]  326 	clr	(109, x)
      00014E 96               [ 1]  327 	ldw	x, sp
      00014F 6F 6E            [ 1]  328 	clr	(110, x)
      000151 96               [ 1]  329 	ldw	x, sp
      000152 6F 6F            [ 1]  330 	clr	(111, x)
      000154 96               [ 1]  331 	ldw	x, sp
      000155 6F 70            [ 1]  332 	clr	(112, x)
      000157 96               [ 1]  333 	ldw	x, sp
      000158 6F 71            [ 1]  334 	clr	(113, x)
      00015A 96               [ 1]  335 	ldw	x, sp
      00015B 6F 72            [ 1]  336 	clr	(114, x)
      00015D 96               [ 1]  337 	ldw	x, sp
      00015E 6F 73            [ 1]  338 	clr	(115, x)
      000160 96               [ 1]  339 	ldw	x, sp
      000161 6F 74            [ 1]  340 	clr	(116, x)
      000163 96               [ 1]  341 	ldw	x, sp
      000164 6F 75            [ 1]  342 	clr	(117, x)
      000166 96               [ 1]  343 	ldw	x, sp
      000167 6F 76            [ 1]  344 	clr	(118, x)
      000169 96               [ 1]  345 	ldw	x, sp
      00016A 6F 77            [ 1]  346 	clr	(119, x)
      00016C 96               [ 1]  347 	ldw	x, sp
      00016D 6F 78            [ 1]  348 	clr	(120, x)
      00016F 96               [ 1]  349 	ldw	x, sp
      000170 6F 79            [ 1]  350 	clr	(121, x)
      000172 96               [ 1]  351 	ldw	x, sp
      000173 6F 7A            [ 1]  352 	clr	(122, x)
      000175 96               [ 1]  353 	ldw	x, sp
      000176 6F 7B            [ 1]  354 	clr	(123, x)
      000178 96               [ 1]  355 	ldw	x, sp
      000179 6F 7C            [ 1]  356 	clr	(124, x)
      00017B 96               [ 1]  357 	ldw	x, sp
      00017C 6F 7D            [ 1]  358 	clr	(125, x)
      00017E 96               [ 1]  359 	ldw	x, sp
      00017F 6F 7E            [ 1]  360 	clr	(126, x)
      000181 96               [ 1]  361 	ldw	x, sp
      000182 6F 7F            [ 1]  362 	clr	(127, x)
      000184 96               [ 1]  363 	ldw	x, sp
      000185 6F 80            [ 1]  364 	clr	(128, x)
      000187 96               [ 1]  365 	ldw	x, sp
      000188 6F 81            [ 1]  366 	clr	(129, x)
      00018A 96               [ 1]  367 	ldw	x, sp
      00018B 6F 82            [ 1]  368 	clr	(130, x)
      00018D 96               [ 1]  369 	ldw	x, sp
      00018E 6F 83            [ 1]  370 	clr	(131, x)
      000190 96               [ 1]  371 	ldw	x, sp
      000191 6F 84            [ 1]  372 	clr	(132, x)
      000193 96               [ 1]  373 	ldw	x, sp
      000194 6F 85            [ 1]  374 	clr	(133, x)
      000196 96               [ 1]  375 	ldw	x, sp
      000197 6F 86            [ 1]  376 	clr	(134, x)
      000199 96               [ 1]  377 	ldw	x, sp
      00019A 6F 87            [ 1]  378 	clr	(135, x)
      00019C 96               [ 1]  379 	ldw	x, sp
      00019D 6F 88            [ 1]  380 	clr	(136, x)
      00019F 96               [ 1]  381 	ldw	x, sp
      0001A0 6F 89            [ 1]  382 	clr	(137, x)
      0001A2 96               [ 1]  383 	ldw	x, sp
      0001A3 6F 8A            [ 1]  384 	clr	(138, x)
      0001A5 96               [ 1]  385 	ldw	x, sp
      0001A6 6F 8B            [ 1]  386 	clr	(139, x)
      0001A8 96               [ 1]  387 	ldw	x, sp
      0001A9 6F 8C            [ 1]  388 	clr	(140, x)
      0001AB 96               [ 1]  389 	ldw	x, sp
      0001AC 6F 8D            [ 1]  390 	clr	(141, x)
      0001AE 96               [ 1]  391 	ldw	x, sp
      0001AF 6F 8E            [ 1]  392 	clr	(142, x)
      0001B1 96               [ 1]  393 	ldw	x, sp
      0001B2 6F 8F            [ 1]  394 	clr	(143, x)
      0001B4 96               [ 1]  395 	ldw	x, sp
      0001B5 6F 90            [ 1]  396 	clr	(144, x)
      0001B7 96               [ 1]  397 	ldw	x, sp
      0001B8 6F 91            [ 1]  398 	clr	(145, x)
      0001BA 96               [ 1]  399 	ldw	x, sp
      0001BB 6F 92            [ 1]  400 	clr	(146, x)
      0001BD 96               [ 1]  401 	ldw	x, sp
      0001BE 6F 93            [ 1]  402 	clr	(147, x)
      0001C0 96               [ 1]  403 	ldw	x, sp
      0001C1 6F 94            [ 1]  404 	clr	(148, x)
      0001C3 96               [ 1]  405 	ldw	x, sp
      0001C4 6F 95            [ 1]  406 	clr	(149, x)
      0001C6 96               [ 1]  407 	ldw	x, sp
      0001C7 6F 96            [ 1]  408 	clr	(150, x)
      0001C9 96               [ 1]  409 	ldw	x, sp
      0001CA 6F 97            [ 1]  410 	clr	(151, x)
      0001CC 96               [ 1]  411 	ldw	x, sp
      0001CD 6F 98            [ 1]  412 	clr	(152, x)
      0001CF 96               [ 1]  413 	ldw	x, sp
      0001D0 6F 99            [ 1]  414 	clr	(153, x)
      0001D2 96               [ 1]  415 	ldw	x, sp
      0001D3 6F 9A            [ 1]  416 	clr	(154, x)
      0001D5 96               [ 1]  417 	ldw	x, sp
      0001D6 6F 9B            [ 1]  418 	clr	(155, x)
      0001D8 96               [ 1]  419 	ldw	x, sp
      0001D9 6F 9C            [ 1]  420 	clr	(156, x)
      0001DB 96               [ 1]  421 	ldw	x, sp
      0001DC 6F 9D            [ 1]  422 	clr	(157, x)
      0001DE 96               [ 1]  423 	ldw	x, sp
      0001DF 6F 9E            [ 1]  424 	clr	(158, x)
      0001E1 96               [ 1]  425 	ldw	x, sp
      0001E2 6F 9F            [ 1]  426 	clr	(159, x)
      0001E4 96               [ 1]  427 	ldw	x, sp
      0001E5 6F A0            [ 1]  428 	clr	(160, x)
      0001E7 96               [ 1]  429 	ldw	x, sp
      0001E8 6F A1            [ 1]  430 	clr	(161, x)
      0001EA 96               [ 1]  431 	ldw	x, sp
      0001EB 6F A2            [ 1]  432 	clr	(162, x)
      0001ED 96               [ 1]  433 	ldw	x, sp
      0001EE 6F A3            [ 1]  434 	clr	(163, x)
      0001F0 96               [ 1]  435 	ldw	x, sp
      0001F1 6F A4            [ 1]  436 	clr	(164, x)
      0001F3 96               [ 1]  437 	ldw	x, sp
      0001F4 6F A5            [ 1]  438 	clr	(165, x)
      0001F6 96               [ 1]  439 	ldw	x, sp
      0001F7 6F A6            [ 1]  440 	clr	(166, x)
      0001F9 96               [ 1]  441 	ldw	x, sp
      0001FA 6F A7            [ 1]  442 	clr	(167, x)
      0001FC 96               [ 1]  443 	ldw	x, sp
      0001FD 6F A8            [ 1]  444 	clr	(168, x)
      0001FF 96               [ 1]  445 	ldw	x, sp
      000200 6F A9            [ 1]  446 	clr	(169, x)
      000202 96               [ 1]  447 	ldw	x, sp
      000203 6F AA            [ 1]  448 	clr	(170, x)
      000205 96               [ 1]  449 	ldw	x, sp
      000206 6F AB            [ 1]  450 	clr	(171, x)
      000208 96               [ 1]  451 	ldw	x, sp
      000209 6F AC            [ 1]  452 	clr	(172, x)
      00020B 96               [ 1]  453 	ldw	x, sp
      00020C 6F AD            [ 1]  454 	clr	(173, x)
      00020E 96               [ 1]  455 	ldw	x, sp
      00020F 6F AE            [ 1]  456 	clr	(174, x)
      000211 96               [ 1]  457 	ldw	x, sp
      000212 6F AF            [ 1]  458 	clr	(175, x)
      000214 96               [ 1]  459 	ldw	x, sp
      000215 6F B0            [ 1]  460 	clr	(176, x)
      000217 96               [ 1]  461 	ldw	x, sp
      000218 6F B1            [ 1]  462 	clr	(177, x)
      00021A 96               [ 1]  463 	ldw	x, sp
      00021B 6F B2            [ 1]  464 	clr	(178, x)
      00021D 96               [ 1]  465 	ldw	x, sp
      00021E 6F B3            [ 1]  466 	clr	(179, x)
      000220 96               [ 1]  467 	ldw	x, sp
      000221 6F B4            [ 1]  468 	clr	(180, x)
      000223 96               [ 1]  469 	ldw	x, sp
      000224 6F B5            [ 1]  470 	clr	(181, x)
      000226 96               [ 1]  471 	ldw	x, sp
      000227 6F B6            [ 1]  472 	clr	(182, x)
      000229 96               [ 1]  473 	ldw	x, sp
      00022A 6F B7            [ 1]  474 	clr	(183, x)
      00022C 96               [ 1]  475 	ldw	x, sp
      00022D 6F B8            [ 1]  476 	clr	(184, x)
      00022F 96               [ 1]  477 	ldw	x, sp
      000230 6F B9            [ 1]  478 	clr	(185, x)
      000232 96               [ 1]  479 	ldw	x, sp
      000233 6F BA            [ 1]  480 	clr	(186, x)
      000235 96               [ 1]  481 	ldw	x, sp
      000236 6F BB            [ 1]  482 	clr	(187, x)
      000238 96               [ 1]  483 	ldw	x, sp
      000239 6F BC            [ 1]  484 	clr	(188, x)
      00023B 96               [ 1]  485 	ldw	x, sp
      00023C 6F BD            [ 1]  486 	clr	(189, x)
      00023E 96               [ 1]  487 	ldw	x, sp
      00023F 6F BE            [ 1]  488 	clr	(190, x)
      000241 96               [ 1]  489 	ldw	x, sp
      000242 6F BF            [ 1]  490 	clr	(191, x)
      000244 96               [ 1]  491 	ldw	x, sp
      000245 6F C0            [ 1]  492 	clr	(192, x)
      000247 96               [ 1]  493 	ldw	x, sp
      000248 6F C1            [ 1]  494 	clr	(193, x)
      00024A 96               [ 1]  495 	ldw	x, sp
      00024B 6F C2            [ 1]  496 	clr	(194, x)
      00024D 96               [ 1]  497 	ldw	x, sp
      00024E 6F C3            [ 1]  498 	clr	(195, x)
      000250 96               [ 1]  499 	ldw	x, sp
      000251 6F C4            [ 1]  500 	clr	(196, x)
      000253 96               [ 1]  501 	ldw	x, sp
      000254 6F C5            [ 1]  502 	clr	(197, x)
      000256 96               [ 1]  503 	ldw	x, sp
      000257 6F C6            [ 1]  504 	clr	(198, x)
      000259 96               [ 1]  505 	ldw	x, sp
      00025A 6F C7            [ 1]  506 	clr	(199, x)
      00025C 96               [ 1]  507 	ldw	x, sp
      00025D 6F C8            [ 1]  508 	clr	(200, x)
                                    509 ;	src/main.c: 23: for (uint8_t i = 0; i < 100; i++)
      00025F 4F               [ 1]  510 	clr	a
      000260                        511 00127$:
      000260 A1 64            [ 1]  512 	cp	a, #0x64
      000262 24 0E            [ 1]  513 	jrnc	00101$
                                    514 ;	src/main.c: 25: buff[i] = i/* +7+'0' */;
      000264 96               [ 1]  515 	ldw	x, sp
      000265 5C               [ 1]  516 	incw	x
      000266 89               [ 2]  517 	pushw	x
      000267 5F               [ 1]  518 	clrw	x
      000268 97               [ 1]  519 	ld	xl, a
      000269 72 FB 01         [ 2]  520 	addw	x, (1, sp)
      00026C 5B 02            [ 2]  521 	addw	sp, #2
      00026E F7               [ 1]  522 	ld	(x), a
                                    523 ;	src/main.c: 23: for (uint8_t i = 0; i < 100; i++)
      00026F 4C               [ 1]  524 	inc	a
      000270 20 EE            [ 2]  525 	jra	00127$
      000272                        526 00101$:
                                    527 ;	src/main.c: 28: spi_config();
      000272 CDr00r00         [ 4]  528 	call	_spi_config
                                    529 ;	src/main.c: 30: flash_write_enable();
      000275 CDr00r00         [ 4]  530 	call	_flash_write_enable
                                    531 ;	src/main.c: 32: flash_erase_chip();
      000278 CDr00r00         [ 4]  532 	call	_flash_erase_chip
                                    533 ;	src/main.c: 33: flash_busy_wait();
      00027B CDr00r00         [ 4]  534 	call	_flash_busy_wait
                                    535 ;	src/main.c: 35: flash_write_enable();
      00027E CDr00r00         [ 4]  536 	call	_flash_write_enable
                                    537 ;	src/main.c: 36: flash_write_to_addr(0x012345, buff, 100);
      000281 4B 64            [ 1]  538 	push	#0x64
      000283 4B 00            [ 1]  539 	push	#0x00
      000285 96               [ 1]  540 	ldw	x, sp
      000286 1C 00 03         [ 2]  541 	addw	x, #3
      000289 89               [ 2]  542 	pushw	x
      00028A 4B 45            [ 1]  543 	push	#0x45
      00028C 4B 23            [ 1]  544 	push	#0x23
      00028E 4B 01            [ 1]  545 	push	#0x01
      000290 4B 00            [ 1]  546 	push	#0x00
      000292 CDr00r00         [ 4]  547 	call	_flash_write_to_addr
      000295 5B 08            [ 2]  548 	addw	sp, #8
                                    549 ;	src/main.c: 37: flash_busy_wait();
      000297 CDr00r00         [ 4]  550 	call	_flash_busy_wait
                                    551 ;	src/main.c: 39: uart_write_8bits(0x99); //indicates start
      00029A 4B 99            [ 1]  552 	push	#0x99
      00029C CDr03r26         [ 4]  553 	call	_uart_write_8bits
      00029F 84               [ 1]  554 	pop	a
                                    555 ;	src/main.c: 78: flash_read_from_addr(0x012345, buff2, 100);
      0002A0 4B 64            [ 1]  556 	push	#0x64
      0002A2 4B 00            [ 1]  557 	push	#0x00
      0002A4 96               [ 1]  558 	ldw	x, sp
      0002A5 1C 00 67         [ 2]  559 	addw	x, #103
      0002A8 89               [ 2]  560 	pushw	x
      0002A9 4B 45            [ 1]  561 	push	#0x45
      0002AB 4B 23            [ 1]  562 	push	#0x23
      0002AD 4B 01            [ 1]  563 	push	#0x01
      0002AF 4B 00            [ 1]  564 	push	#0x00
      0002B1 CDr00r00         [ 4]  565 	call	_flash_read_from_addr
      0002B4 5B 08            [ 2]  566 	addw	sp, #8
                                    567 ;	src/main.c: 81: char hex_string[2] = {0};
      0002B6 0F C9            [ 1]  568 	clr	(0xc9, sp)
      0002B8 96               [ 1]  569 	ldw	x, sp
      0002B9 6F CA            [ 1]  570 	clr	(202, x)
                                    571 ;	src/main.c: 82: for(uint8_t ii = 0; ii < 100; ii++)
      0002BB 0F CB            [ 1]  572 	clr	(0xcb, sp)
      0002BD                        573 00136$:
      0002BD 7B CB            [ 1]  574 	ld	a, (0xcb, sp)
      0002BF A1 64            [ 1]  575 	cp	a, #0x64
      0002C1 24 18            [ 1]  576 	jrnc	00124$
                                    577 ;	src/main.c: 85: uart_write_8bits(buff2[ii]);
      0002C3 5F               [ 1]  578 	clrw	x
      0002C4 7B CB            [ 1]  579 	ld	a, (0xcb, sp)
      0002C6 97               [ 1]  580 	ld	xl, a
      0002C7 89               [ 2]  581 	pushw	x
      0002C8 96               [ 1]  582 	ldw	x, sp
      0002C9 1C 00 67         [ 2]  583 	addw	x, #103
      0002CC 72 FB 01         [ 2]  584 	addw	x, (1, sp)
      0002CF 5B 02            [ 2]  585 	addw	sp, #2
      0002D1 F6               [ 1]  586 	ld	a, (x)
      0002D2 88               [ 1]  587 	push	a
      0002D3 CDr03r26         [ 4]  588 	call	_uart_write_8bits
      0002D6 84               [ 1]  589 	pop	a
                                    590 ;	src/main.c: 82: for(uint8_t ii = 0; ii < 100; ii++)
      0002D7 0C CB            [ 1]  591 	inc	(0xcb, sp)
      0002D9 20 E2            [ 2]  592 	jra	00136$
                                    593 ;	src/main.c: 89: while(1);
      0002DB                        594 00124$:
      0002DB 20 FE            [ 2]  595 	jra	00124$
                                    596 ;	src/main.c: 90: }
      0002DD 5B CB            [ 2]  597 	addw	sp, #203
      0002DF 81               [ 4]  598 	ret
                                    599 ;	src/main.c: 93: void uart_init()
                                    600 ;	-----------------------------------------
                                    601 ;	 function uart_init
                                    602 ;	-----------------------------------------
      0002E0                        603 _uart_init:
                                    604 ;	src/main.c: 96: UART1_CR2 |= UART_CR2_TEN; // Transmitter enable
      0002E0 72 16 52 35      [ 1]  605 	bset	21045, #3
                                    606 ;	src/main.c: 98: UART1_CR3 &= ~(UART_CR3_STOP1 | UART_CR3_STOP2); // 1 stop bit
      0002E4 C6 52 36         [ 1]  607 	ld	a, 0x5236
      0002E7 A4 CF            [ 1]  608 	and	a, #0xcf
      0002E9 C7 52 36         [ 1]  609 	ld	0x5236, a
                                    610 ;	src/main.c: 100: UART1_BRR2 = 0x01; UART1_BRR1 = 0x34; // 0x0341 coded funky way (see page 365 and 336 of ref manual)
      0002EC 35 01 52 33      [ 1]  611 	mov	0x5233+0, #0x01
      0002F0 35 34 52 32      [ 1]  612 	mov	0x5232+0, #0x34
                                    613 ;	src/main.c: 101: }
      0002F4 81               [ 4]  614 	ret
                                    615 ;	src/main.c: 104: uint16_t uart_write(const char *str) {
                                    616 ;	-----------------------------------------
                                    617 ;	 function uart_write
                                    618 ;	-----------------------------------------
      0002F5                        619 _uart_write:
      0002F5 52 03            [ 2]  620 	sub	sp, #3
                                    621 ;	src/main.c: 106: for(i = 0; i < strlen(str); i++) {
      0002F7 0F 03            [ 1]  622 	clr	(0x03, sp)
      0002F9                        623 00106$:
      0002F9 1E 06            [ 2]  624 	ldw	x, (0x06, sp)
      0002FB 89               [ 2]  625 	pushw	x
      0002FC CDr00r00         [ 4]  626 	call	_strlen
      0002FF 5B 02            [ 2]  627 	addw	sp, #2
      000301 1F 01            [ 2]  628 	ldw	(0x01, sp), x
      000303 5F               [ 1]  629 	clrw	x
      000304 7B 03            [ 1]  630 	ld	a, (0x03, sp)
      000306 97               [ 1]  631 	ld	xl, a
      000307 13 01            [ 2]  632 	cpw	x, (0x01, sp)
      000309 24 14            [ 1]  633 	jrnc	00104$
                                    634 ;	src/main.c: 107: while(!(UART1_SR & UART_SR_TXE)); // !Transmit data register empty
      00030B                        635 00101$:
      00030B C6 52 30         [ 1]  636 	ld	a, 0x5230
      00030E 2A FB            [ 1]  637 	jrpl	00101$
                                    638 ;	src/main.c: 108: UART1_DR = str[i];
      000310 5F               [ 1]  639 	clrw	x
      000311 7B 03            [ 1]  640 	ld	a, (0x03, sp)
      000313 97               [ 1]  641 	ld	xl, a
      000314 72 FB 06         [ 2]  642 	addw	x, (0x06, sp)
      000317 F6               [ 1]  643 	ld	a, (x)
      000318 C7 52 31         [ 1]  644 	ld	0x5231, a
                                    645 ;	src/main.c: 106: for(i = 0; i < strlen(str); i++) {
      00031B 0C 03            [ 1]  646 	inc	(0x03, sp)
      00031D 20 DA            [ 2]  647 	jra	00106$
      00031F                        648 00104$:
                                    649 ;	src/main.c: 110: return(i); // Bytes sent
      00031F 7B 03            [ 1]  650 	ld	a, (0x03, sp)
      000321 5F               [ 1]  651 	clrw	x
      000322 97               [ 1]  652 	ld	xl, a
                                    653 ;	src/main.c: 111: }
      000323 5B 03            [ 2]  654 	addw	sp, #3
      000325 81               [ 4]  655 	ret
                                    656 ;	src/main.c: 113: void uart_write_8bits(uint8_t d)
                                    657 ;	-----------------------------------------
                                    658 ;	 function uart_write_8bits
                                    659 ;	-----------------------------------------
      000326                        660 _uart_write_8bits:
                                    661 ;	src/main.c: 115: while(!(UART1_SR & UART_SR_TXE)); // !Transmit data register empty
      000326                        662 00101$:
      000326 C6 52 30         [ 1]  663 	ld	a, 0x5230
      000329 2A FB            [ 1]  664 	jrpl	00101$
                                    665 ;	src/main.c: 116: UART1_DR = d;
      00032B AE 52 31         [ 2]  666 	ldw	x, #0x5231
      00032E 7B 03            [ 1]  667 	ld	a, (0x03, sp)
      000330 F7               [ 1]  668 	ld	(x), a
                                    669 ;	src/main.c: 117: }
      000331 81               [ 4]  670 	ret
                                    671 ;	src/main.c: 120: void int_to_hex_str(uint32_t dec, char *hex_str, uint8_t hex_str_len)
                                    672 ;	-----------------------------------------
                                    673 ;	 function int_to_hex_str
                                    674 ;	-----------------------------------------
      000332                        675 _int_to_hex_str:
      000332 52 03            [ 2]  676 	sub	sp, #3
                                    677 ;	src/main.c: 123: while(hex_str_len)
      000334 7B 0C            [ 1]  678 	ld	a, (0x0c, sp)
      000336 6B 03            [ 1]  679 	ld	(0x03, sp), a
      000338                        680 00101$:
      000338 0D 03            [ 1]  681 	tnz	(0x03, sp)
      00033A 27 37            [ 1]  682 	jreq	00104$
                                    683 ;	src/main.c: 125: uint8_t masked_dec = (dec & mask);
      00033C 7B 09            [ 1]  684 	ld	a, (0x09, sp)
      00033E A4 0F            [ 1]  685 	and	a, #0x0f
                                    686 ;	src/main.c: 126: hex_str[hex_str_len - 1] = (masked_dec < 10) ? (masked_dec + '0') : (masked_dec + '7');
      000340 5F               [ 1]  687 	clrw	x
      000341 41               [ 1]  688 	exg	a, xl
      000342 7B 03            [ 1]  689 	ld	a, (0x03, sp)
      000344 41               [ 1]  690 	exg	a, xl
      000345 5A               [ 2]  691 	decw	x
      000346 72 FB 0A         [ 2]  692 	addw	x, (0x0a, sp)
      000349 1F 01            [ 2]  693 	ldw	(0x01, sp), x
      00034B 97               [ 1]  694 	ld	xl, a
      00034C A1 0A            [ 1]  695 	cp	a, #0x0a
      00034E 24 05            [ 1]  696 	jrnc	00106$
      000350 9F               [ 1]  697 	ld	a, xl
      000351 AB 30            [ 1]  698 	add	a, #0x30
      000353 20 03            [ 2]  699 	jra	00107$
      000355                        700 00106$:
      000355 9F               [ 1]  701 	ld	a, xl
      000356 AB 37            [ 1]  702 	add	a, #0x37
      000358                        703 00107$:
      000358 1E 01            [ 2]  704 	ldw	x, (0x01, sp)
      00035A F7               [ 1]  705 	ld	(x), a
                                    706 ;	src/main.c: 128: dec >>= 4;
      00035B 1E 08            [ 2]  707 	ldw	x, (0x08, sp)
      00035D 16 06            [ 2]  708 	ldw	y, (0x06, sp)
      00035F 90 54            [ 2]  709 	srlw	y
      000361 56               [ 2]  710 	rrcw	x
      000362 90 54            [ 2]  711 	srlw	y
      000364 56               [ 2]  712 	rrcw	x
      000365 90 54            [ 2]  713 	srlw	y
      000367 56               [ 2]  714 	rrcw	x
      000368 90 54            [ 2]  715 	srlw	y
      00036A 56               [ 2]  716 	rrcw	x
      00036B 1F 08            [ 2]  717 	ldw	(0x08, sp), x
      00036D 17 06            [ 2]  718 	ldw	(0x06, sp), y
                                    719 ;	src/main.c: 129: hex_str_len--;
      00036F 0A 03            [ 1]  720 	dec	(0x03, sp)
      000371 20 C5            [ 2]  721 	jra	00101$
      000373                        722 00104$:
                                    723 ;	src/main.c: 131: }
      000373 5B 03            [ 2]  724 	addw	sp, #3
      000375 81               [ 4]  725 	ret
                                    726 	.area CODE
                                    727 	.area CONST
                                    728 	.area CONST
      000000                        729 ___str_0:
      000000 20                     730 	.ascii " "
      000001 00                     731 	.db 0x00
                                    732 	.area CODE
                                    733 	.area INITIALIZER
                                    734 	.area CABS (ABS)
